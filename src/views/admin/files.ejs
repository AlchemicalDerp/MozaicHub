<%- include('../partials/header') %>
<%- include('./partials/nav') %>
<h2>All Files</h2>
<table class="table">
  <thead><tr><th>Title</th><th>Owner</th><th>Visibility</th><th>Size</th><th>Actions</th></tr></thead>
  <tbody>
    <% files.forEach(f => { %>
      <tr>
        <td><a href="/files/<%= f.id %>"><%= f.title %></a></td>
        <td><%= f.owner ? f.owner.username : 'Unknown' %></td>
        <td><%= f.visibility %></td>
        <td><%= (f.sizeBytes/1024/1024).toFixed(2) %> MB</td>
        <td>
          <form method="post" action="/admin/files/<%= f.id %>?_method=DELETE" class="inline" data-confirm="Are you sure you want to delete '<%= f.title %>'? This will remove the file and its related data.">
            <input type="text" name="reason" placeholder="Reason (optional)" class="reason-input" />
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
<%- include('../partials/footer') %>
